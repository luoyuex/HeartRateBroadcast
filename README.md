# 心率桌面显示程序使用指南

## 功能特点
- 🔍 **智能设备发现** - 自动扫描并列出附近的心率设备
- ⚡ **可视化设备选择** - 图形界面选择要连接的设备
- 📊 **实时心率显示** - 桌面悬浮窗显示实时心率数据
- 🎯 **始终置顶显示** - 不被其他窗口覆盖
- 🔄 **自动重连机制** - 连接断开时自动重连
- 🎨 **现代化UI** - 美观的渐变界面设计

## 使用步骤

### 🚀 一键启动
```bash
npm start
```

就这么简单！应用会自动：
- 启动蓝牙设备管理服务
- 打开设备管理器窗口
- 创建心率显示悬浮窗
- 准备好所有功能

### 🔗 连接设备
1. 点击"开始扫描设备"
2. 从设备列表中选择你的心率设备（带❤️图标的是心率设备）
3. 点击设备即可连接
4. 连接成功后心率数据会在悬浮窗中显示

## 设备发现与兼容性

### 🔍 智能设备识别
应用会自动识别和分类以下设备类型：

✅ **优先显示（红色边框）**：
- ❤️ **心率设备** - 明确支持BLE心率服务的设备
- ⌚ **可穿戴设备** - Apple Watch、华为手表、小米手环、vivo手表等
- 🏃 **健身设备** - 跑步机、动感单车、椭圆机等

✅ **其他相关设备**：
- 📟 **智能设备** - 有蓝牙服务的智能设备
- 📡 **蓝牙设备** - 其他有名称的蓝牙设备
- 📱 **移动设备** - 手机、平板等
- 🎧 **音频设备** - 耳机、音响等

### 🎯 智能过滤算法
**只显示有价值的设备：**
- ✅ 明确支持心率服务的设备
- ✅ 识别的可穿戴设备（手表、手环等）
- ✅ 健身设备（跑步机、单车等）  
- ✅ 有真实名称的设备（非Unknown）
- ✅ 有蓝牙服务且信号强的设备

**过滤掉的设备：**
- ❌ 匿名设备（无名称、无服务）
- ❌ 信号太弱的设备（< -75dBm）
- ❌ "Unknown"类型设备
- ❌ 无意义的临时设备

### 📊 设备信息显示
每个设备显示：
- 设备名称和类型图标
- MAC地址
- 设备类型标签
- 信号强度（RSSI）
- 支持的服务数量

## UI说明

### 设备管理器
- **绿色RSSI** - 信号很强 (> -50dBm)
- **黄色RSSI** - 信号一般 (-50 to -70dBm) 
- **红色RSSI** - 信号较弱 (< -70dBm)
- **❤️图标** - 支持心率服务的设备
- **蓝色边框** - 当前已连接的设备

### 心率悬浮窗
- 半透明背景，不影响其他应用
- 心跳动画根据实际心率同步
- 支持拖拽移动位置
- 始终置顶显示

## 注意事项

⚠️ **全屏游戏覆盖问题**：
- 独占全屏游戏无法被覆盖（这是操作系统限制）
- 建议游戏使用"无边框窗口"或"窗口化"模式
- 或者使用双显示器，心率显示在副屏

## 故障排除

1. **扫描不到设备**：
   - 确保蓝牙已开启
   - 确保设备在可发现模式
   - 尝试重启蓝牙服务

2. **连接失败**：
   - 检查设备是否被其他应用占用
   - 尝试重新扫描设备
   - 重启设备管理器

3. **心率数据不显示**：
   - 确保设备支持心率服务
   - 检查设备是否需要配对
   - 查看控制台错误信息

## 高级功能

### Web模式（可选）
如果不想使用Electron，也可以使用Web版本：
```bash
npm run web
```
然后访问 http://localhost:3000

### 开发调试
- 使用菜单"窗口 > 开发者工具"打开调试面板
- 查看WebSocket连接状态和消息
- 监控设备连接日志

## 文件结构
```
├── scan.js              # 蓝牙设备管理器
├── main.js              # Electron主进程
├── device-manager.html  # 设备管理界面
├── device-manager.js    # 设备管理逻辑
├── index.html           # 心率显示界面
├── renderer.js          # 心率显示逻辑
└── server.js            # Web服务器（可选）
```

祝你使用愉快！❤️